(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.validator=b()}}}(this,function(){var c={version:"stable-1.0.1"},a=function(g){return g.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")},d=function(h,g){if(h===""||h===undefined||h===null){h=g}return h},f=function(h){var g=h;if(g=Date.parse(h)){return new Date(g)}g=h;if(/^[0-9\-\/\ :]*$/.test(g)){g=g.replace(/\-/g,"/");if(g=new Date(g)){return g}}return NaN},b={required:function(h,g){g=d(g,null);return g==null?h.message:true},requiredstring:function(h,g){g=d(g,"");h.trim==true&&(g=a(g));return g.length==0?h.message:true},"int":function(j,i){i=d(i,null);if(i==null){return true}if(!/^\-?[0-9]+$/.test(i)){return j.message}else{i=parseInt(i)}var h=parseInt(j.min);var g=parseInt(j.max);if(!isNaN(h)&&i-h<0){return j.message}if(!isNaN(g)&&i-g>0){return j.message}return true},"long":function(){return b["int"]([].slice.call(arguments))},"double":function(l,j){j=d(j,null);if(j==null){return true}if(!/^\-?[0-9]*\.?[0-9]+$/.test(j)){return l.message}else{j=parseFloat(j)}var g=parseFloat(l.maxInclusive);var h=parseFloat(l.minInclusive);var i=parseFloat(l.maxExclusive);var k=parseFloat(l.minExclusive);if((!isNaN(g)&&j-g>0)||(!isNaN(h)&&j-h<0)||(!isNaN(i)&&j-i>=0)||(!isNaN(k)&&j-k<=0)){return l.message}return true},date:function(j,i){i=d(i,null);if(i==null){return true}var i=f(i);if(!i||"Invalid Date"==i){return j.message}var h=f(j.min);var g=f(j.max);if(!isNaN(h)&&i.getTime()-h.getTime()<0){return j.message}if(!isNaN(g)&&i.getTime()-g.getTime()>0){return j.message}return true},email:function(h,g){h.expression="^[_A-Za-z0-9-]+(.[_A-Za-z0-9-]+)*@([A-Za-z0-9-])+(.[A-Za-z0-9-]+)*((.[A-Za-z0-9]{2,})|(.[A-Za-z0-9]{2,}.[A-Za-z0-9]{2,}))$";h.caseSensitive=false;return b.regex(h,g)},regex:function(j,i){i=d(i,null);if(i==null||a(i).length==0){return true}undefined==j.caseSensitive&&(j.caseSensitive=true);undefined==j.trim&&(j.trim=true);j.trim==true&&(i=a(i));var h=j.caseSensitive?"i":undefined;try{if(!new RegExp(j.expression,h).test(i)){return j.message}}catch(g){}return true},url:function(h,g){h.expression="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";h.caseSensitive=false;return b.regex(h,g)},stringlength:function(h,g){g=d(g,null);if(g==null||g.length<=0){return true}undefined==h.minLength&&(h.minLength=-1);undefined==h.maxLength&&(h.maxLength=-1);undefined==h.trim&&(h.trim=true);h.trim==true&&(g=a(g));if((h.minLength>-1)&&(g.length<h.minLength)){return h.message}else{if((h.minLength>-1)&&(g.length>h.minLength)){return h.message}}return true}},e=c.validate=function(g,m){var k=[];for(var j in m||{}){for(var h in m[j]||{}){var n=m[j][h]||{};var i=b[h];if(typeof i=="function"){var l=i(n,g[j],g);l!==true&&k.push({field:j,message:l,value:g[j]})}else{throw new Error("Validation function "+h+" not found.")}}}return k.length?{result:false,field:k[0].field,message:k[0].message,stacks:k}:{result:true,message:"OK"}};return c}));